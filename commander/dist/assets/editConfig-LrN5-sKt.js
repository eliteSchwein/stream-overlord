import{l as ie,q as re,s as ce,g as de,p as fe,aJ as G,a2 as ve,E as b,K as g,J as me,aK as xe,aL as ge,aM as m,aN as he,c as we,af as Ve,f as n,h as i,F as I,a3 as R,Z as U,aO as Ce,i as ye,a4 as ke,P as N,Y as pe,O as be,aP as Pe,_ as _e,k as Fe,o as Se,w as r,D as O,C as Be,y as Ie}from"./index-DspjuNtg.js";import{V as $,a as T}from"./VRow-BWxlR9Oc.js";import{u as Re,V as j,a as Ne,m as Te,b as Ae,c as Me}from"./autofocus-BnRmeNwC.js";import{a as ze,V as J,m as He}from"./VLabel-DHVyNo71.js";const De={data(){return{backendConfigText:""}},mounted(){this.backendConfigText=this.getBackendConfig},computed:{...ie(re,["getBackendConfig"])},methods:{saveConfig(){ce.$emit("websocket:send",{method:"update_config",params:{data:this.backendConfigText}})}}},Ee=fe({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Ae(),...He(),...Te()},"VTextarea"),Ge=de()({name:"VTextarea",directives:{vIntersect:G},inheritAttrs:!1,props:Ee(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,"update:rows":e=>!0},setup(e,d){let{attrs:h,emit:w,slots:o}=d;const a=ve(e,"modelValue"),{isFocused:c,focus:K,blur:q}=ze(e),{onIntersect:L}=Me(e),Y=b(()=>typeof e.counterValue=="function"?e.counterValue(a.value):(a.value||"").toString().length),Z=b(()=>{if(h.maxlength)return h.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),A=g(),V=g(),M=me(""),C=g(),y=Re(e),Q=b(()=>e.persistentPlaceholder||c.value||e.active);function P(){y.isSuppressing.value&&y.update(),C.value!==document.activeElement&&C.value?.focus(),c.value||K()}function W(t){P(),w("click:control",t)}function X(t){w("mousedown:control",t)}function ee(t){t.stopPropagation(),P(),N(()=>{a.value="",Pe(e["onClick:clear"],t)})}function te(t){const l=t.target;if(a.value=l.value,e.modelModifiers?.trim){const s=[l.selectionStart,l.selectionEnd];N(()=>{l.selectionStart=s[0],l.selectionEnd=s[1]})}}const f=g(),x=g(Number(e.rows)),_=b(()=>["plain","underlined"].includes(e.variant));xe(()=>{e.autoGrow||(x.value=Number(e.rows))});function v(){e.autoGrow&&N(()=>{if(!f.value||!V.value)return;const t=getComputedStyle(f.value),l=getComputedStyle(V.value.$el),s=parseFloat(t.getPropertyValue("--v-field-padding-top"))+parseFloat(t.getPropertyValue("--v-input-padding-top"))+parseFloat(t.getPropertyValue("--v-field-padding-bottom")),F=f.value.scrollHeight,p=parseFloat(t.lineHeight),S=Math.max(parseFloat(e.rows)*p+s,parseFloat(l.getPropertyValue("--v-input-control-height"))),B=parseFloat(e.maxRows)*p+s||1/0,u=be(F??0,S,B);x.value=Math.floor((u-s)/p),M.value=pe(u)})}ge(v),m(a,v),m(()=>e.rows,v),m(()=>e.maxRows,v),m(()=>e.density,v),m(x,t=>{w("update:rows",t)});let k;return m(f,t=>{t?(k=new ResizeObserver(v),k.observe(f.value)):k?.disconnect()}),he(()=>{k?.disconnect()}),we(()=>{const t=!!(o.counter||e.counter||e.counterValue),l=!!(t||o.details),[s,F]=Ve(h),{modelValue:p,...S}=J.filterProps(e),B={...j.filterProps(e),"onClick:clear":ee};return n(J,R({ref:A,modelValue:a.value,"onUpdate:modelValue":u=>a.value=u,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":_.value},e.class],style:e.style},s,S,{centerAffix:x.value===1&&!_.value,focused:c.value}),{...o,default:u=>{let{id:ae,isDisabled:z,isDirty:H,isReadonly:ne,isValid:oe,hasDetails:le}=u;return n(j,R({ref:V,style:{"--v-textarea-control-height":M.value},onClick:W,onMousedown:X,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},B,{id:ae.value,active:Q.value||H.value,centerAffix:x.value===1&&!_.value,dirty:H.value||e.dirty,disabled:z.value,focused:c.value,details:le.value,error:oe.value===!1}),{...o,default:se=>{let{props:{class:D,...E}}=se;return i(I,null,[e.prefix&&i("span",{class:"v-text-field__prefix"},[e.prefix]),U(i("textarea",R({ref:C,class:D,value:a.value,onInput:te,autofocus:e.autofocus,readonly:ne.value,disabled:z.value,placeholder:e.placeholder,rows:e.rows,name:y.fieldName.value,autocomplete:y.fieldAutocomplete.value,onFocus:P,onBlur:q},E,F),null),[[G,{handler:L},null,{once:!0}]]),e.autoGrow&&U(i("textarea",{class:ye([D,"v-textarea__sizer"]),id:`${E.id}-sizer`,"onUpdate:modelValue":ue=>a.value=ue,ref:f,readonly:!0,"aria-hidden":"true"},null),[[Ce,a.value]]),e.suffix&&i("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:l?u=>i(I,null,[o.details?.(u),t&&i(I,null,[i("span",null,null),n(Ne,{active:e.persistentCounter||c.value,value:Y.value,max:Z.value,disabled:e.disabled},o.counter)])]):void 0})}),ke({},A,V,C)}});function Ue(e,d,h,w,o,a){return Se(),Fe(O,{class:"overflow-auto mx-auto","max-height":"100%","max-width":"100%",elevation:"0",color:"transparent","min-height":"100%"},{default:r(()=>[n($,{class:"mx-3 my-2 mb-0 pb-0"},{default:r(()=>[n(T,{cols:"9"},{default:r(()=>[n(Ge,{style:{"min-height":"calc(100vh - 90px)"},modelValue:o.backendConfigText,"onUpdate:modelValue":d[0]||(d[0]=c=>o.backendConfigText=c),variant:"outlined"},null,8,["modelValue"])]),_:1}),n(T,null,{default:r(()=>[n(O,{class:"px-4 py-3"},{default:r(()=>[n($,{"align-content":"center",justify:"center",align:"center",dense:""},{default:r(()=>[n(T,{cols:"12"},{default:r(()=>[n(Be,{width:"100%","prepend-icon":"mdi-content-save",color:"grey-darken-3",variant:"flat",elevation:"0",onClick:a.saveConfig},{default:r(()=>[...d[1]||(d[1]=[Ie(" Save Config ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const Ke=_e(De,[["render",Ue]]);export{Ke as default};
